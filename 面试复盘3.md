一家 关于无人机公司

1. bean 的生命周期
2. netty 介绍 vs java nio
3. liunx 底层 epoll
4. eqmx，rabbitmq，kaffka，roketmq 几个的区别 
5. java 线程池
6. 100万设备无人机 硬件连接后端 的你怎么设计
7. spring 加载完后的预加载一些-怎么实现



一家关于低代码平台的

1. 50亿的数据，存储，检索
2. 低代码平台包含哪些









## 100万设备无人机 硬件连接后端 的你怎么设计

针对100万无人机设备连接的硬件后端架构设计，需综合考虑高并发、实时性、扩展性和安全性。以下是分步骤的架构设计方案：

### **1. 分层架构设计**

采用**微服务+分布式架构**，解耦核心功能模块，提升横向扩展能力：

- **接入层**：处理设备连接与协议适配。
- **业务层**：实现核心逻辑（指令下发、数据分析）。
- **数据层**：存储与处理海量数据。
- **监控层**：实时监控系统状态。

#### **(2) 业务层：异步处理与实时计算**

- **消息队列**：
  - **Kafka集群**：削峰填谷，处理设备上报数据（如位置、状态）。
  - **优先级队列**：区分紧急指令（如紧急降落）与普通数据。
- **实时计算**：
  - **Flink/Spark Streaming**：实时分析飞行路径、电池状态，触发告警。
- **API网关**：
  - **鉴权与限流**：OAuth2.0/JWT令牌验证，限制异常设备请求。
  - **指令下发**：通过MQTT Broker推送控制指令（QoS=1确保送达）。

#### **(3) 数据层：海量数据存储**

- **时序数据库**：

  - **InfluxDB/TDengine**：存储设备时序数据（位置、传感器数据），高效压缩与查询。

- **关系型数据库**：

  - **PostgreSQL（分片集群）**：存储设备元数据、用户权限。

- **对象存储**：

  - **MinIO/Amazon S3**：存储媒体文件（图片、视频）。

- **缓存**：

  - **Redis Cluster**：缓存设备实时状态，降低数据库压力。

- 日志：

   elk

#### **(4) 容灾与高可用**

- **多可用区部署**：跨区域部署MQTT Broker和数据库，避免单点故障。
- **数据备份**：数据库主从复制 + 跨区域同步。
- **服务熔断**：Hystrix/Sentinel实现服务降级，防止雪崩效应。

### **4. 监控与运维**

- **日志系统**：
  - ELK Stack：集中收集分析日志，快速定位故障。
- **指标监控**：
  - Prometheus + Grafana：监控连接数、CPU/内存、消息延迟。
- **自动化运维**：
  - Kubernetes集群管理服务，自动扩缩容（HPA根据CPU/连接数触发）



### **关键技术选型**

- **MQTT Broker**：EMQX（支持集群、规则引擎）。
- **数据库**：TDengine（时序数据）+ PostgreSQL（元数据）。
- **消息队列**：Kafka（高吞吐削峰）。
- **容器编排**：Kubernetes + Docker。
- **监控**：Prometheus + Grafana + ELK。





# TDengine 时序数据库

## kaffka



